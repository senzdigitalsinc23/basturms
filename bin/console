#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use App\CLI\Seeder;
use App\CLI\DevServer;

$commands = [
    'db:seed' => Seeder::class,
    'serve'   => DevServer::class,
];

$commandName = $argv[1] ?? null;
$args = array_slice($argv, 2);

if (!$commandName || !isset($commands[$commandName])) {
    echo "\033[33mAvailable commands:\033[0m\n";
    foreach ($commands as $cmd => $class) {
        echo " - {$cmd}\n";
    }
    exit(1);
}

$commandClass = $commands[$commandName];
$command = new $commandClass($args);
$command->run($args);
